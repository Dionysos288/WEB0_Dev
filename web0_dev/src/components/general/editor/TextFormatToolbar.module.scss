.toolbar {
	position: fixed;
	display: flex;
	align-items: center;
	gap: 2px;
	background: var(--bg-elevated);
	border: 1px solid var(--border);
	border-radius: 8px;
	padding: 4px;
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
	z-index: 1000;
	transform: translateX(-50%);
	backdrop-filter: blur(8px);

	.group {
		display: flex;
		align-items: center;
		gap: 2px;
		position: relative;
	}

	.divider {
		width: 1px;
		height: 24px;
		background: var(--main);
		margin: 0 4px;
	}

	.button {
		display: flex;
		align-items: center;
		justify-content: center;
		width: 32px;
		height: 32px;
		padding: 0;
		border: none;
		background: none;
		border-radius: 6px;
		color: var(--text);
		font-size: 16px;
		cursor: pointer;
		transition: all 0.2s ease;

		&:hover {
			background: var(--main-20);
		}

		&.active {
			background: var(--main-20);
		}

		svg {
			width: 18px;
			height: 18px;
		}

		&.headingButton {
			width: auto;
			padding: 0 8px;
			gap: 4px;

			svg:last-child {
				width: 12px;
				height: 12px;
				margin-left: 2px;
			}
		}
	}

	.headingDropdown {
		position: relative;

		.headingMenu {
			position: absolute;
			top: 100%;
			left: 0;
			margin-top: 4px;
			background: var(--white);
			border: 1px solid var(--main-10);
			border-radius: 6px;
			box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
			padding: 4px;
			min-width: 160px;
			backdrop-filter: blur(8px);
			list-style: none;

			.headingOption {
				display: flex;
				align-items: center;
				justify-content: space-between;
				width: 100%;
				padding: 8px;
				border: none;
				background: none;
				font-size: 14px;
				cursor: pointer;
				border-radius: 4px;
				color: var(--text);

				&:hover {
					background: var(--main-20);
				}

				&.active {
					background: var(--main-20);
				}

				.headingLabel {
					display: flex;
					align-items: center;
					gap: 8px;
					flex: 1;

					svg {
						width: 16px;
						height: 16px;
					}

					span {
						flex: 1;
						text-align: left;
					}
				}

				.checkmark {
					width: 16px;
					height: 16px;
					color: var(--accent);
				}
			}
		}
	}
}

.linkPopup {
	position: fixed;
	background: var(--bg-elevated);
	border: 1px solid var(--border);
	border-radius: 8px;
	padding: 8px;
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
	z-index: 1000;
	transform: translateX(-50%);
	backdrop-filter: blur(8px);
	min-width: 200px;

	form {
		display: flex;
		gap: 8px;
	}

	.linkInput {
		flex: 1;
		padding: 6px 12px;
		border: 1px solid var(--border);
		border-radius: 6px;
		background: var(--bg);
		color: var(--text);
		font-size: 14px;
		min-width: 200px;

		&:focus {
			outline: none;
			border-color: var(--accent);
		}
	}

	.linkActions {
		display: flex;
		gap: 4px;

		button {
			display: flex;
			align-items: center;
			justify-content: center;
			width: 32px;
			height: 32px;
			padding: 0;
			border: none;
			background: none;
			border-radius: 6px;
			color: var(--text);
			font-size: 16px;
			cursor: pointer;
			transition: all 0.2s ease;

			&:hover {
				background: var(--hover);
				color: var(--accent);
			}

			&:disabled {
				opacity: 0.5;
				cursor: not-allowed;

				&:hover {
					background: none;
					color: var(--text);
				}
			}

			svg {
				width: 16px;
				height: 16px;
			}
		}
	}
}

.codeBlock {
	position: relative;
	margin: 1em 0;
	background: #1e1e1e;
	border: 1px solid rgba(255, 255, 255, 0.1);
	border-radius: 6px;
	overflow: hidden;
	font-family: 'Fira Code', Consolas, 'Courier New', monospace;

	.codeHeader {
		display: flex;
		align-items: center;
		justify-content: space-between;
		padding: 6px 8px;
		background: #252526;
		border-bottom: 1px solid rgba(255, 255, 255, 0.1);
		user-select: none;

		.languageSelect {
			padding: 2px 6px;
			border: none;
			border-radius: 3px;
			background: transparent;
			color: rgba(255, 255, 255, 0.8);
			font-size: 12px;
			font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen,
				Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
			cursor: pointer;
			outline: none;

			&:hover {
				background: rgba(255, 255, 255, 0.1);
			}

			option {
				background: #252526;
				color: rgba(255, 255, 255, 0.9);
				padding: 4px;
			}
		}

		.copyButton {
			display: flex;
			align-items: center;
			justify-content: center;
			width: 28px;
			height: 28px;
			padding: 0;
			border: none;
			background: none;
			border-radius: 3px;
			color: rgba(255, 255, 255, 0.5);
			cursor: pointer;
			transition: all 0.1s ease;

			&:hover {
				background: rgba(255, 255, 255, 0.1);
				color: rgba(255, 255, 255, 0.9);
			}

			svg {
				width: 14px;
				height: 14px;
			}
		}
	}

	.codeContent {
		display: block;
		padding: 12px;
		margin: 0;
		font-size: 13px;
		line-height: 1.2;
		color: #d4d4d4;
		overflow-x: auto;
		white-space: pre;
		tab-size: 4;
		min-height: 1em;

		&:focus {
			outline: none;
		}

		&::before,
		&::after {
			content: none; // Prevent extra line breaks
		}

		// VS Code-like syntax highlighting
		.keyword {
			color: #569cd6; // blue
		}

		.function {
			color: #dcdcaa; // yellow
		}

		.string {
			color: #ce9178; // orange
		}

		.comment {
			color: #6a9955; // green
		}

		.number {
			color: #b5cea8; // light green
		}

		.variable {
			color: #9cdcfe; // light blue
		}

		.punctuation {
			color: #d4d4d4; // light gray
		}

		.class,
		.type {
			color: #4ec9b0; // teal
		}

		.operator {
			color: #d4d4d4; // light gray
		}

		.parameter {
			color: #9cdcfe; // light blue
		}

		.property {
			color: #9cdcfe; // light blue
		}

		.method {
			color: #dcdcaa; // yellow
		}
	}
}

.highlightContainer {
	color: inherit;
	font: inherit;
	line-height: inherit;

	// Syntax highlighting styles should only apply within this container
	.keyword {
		color: #569cd6;
	}

	.string {
		color: #ce9178;
	}

	.comment {
		color: #6a9955;
	}

	.punctuation {
		color: #d4d4d4;
	}

	.number {
		color: #b5cea8;
	}

	.function {
		color: #dcdcaa;
	}

	.variable {
		color: #9cdcfe;
	}
}

.commandMenu {
	position: absolute;
	background: var(--bg-elevated);
	border: 1px solid var(--border);
	border-radius: 8px;
	box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
	z-index: 1000;
	min-width: 280px;
	max-width: 320px;
	max-height: 400px;
	overflow-y: auto;
	backdrop-filter: blur(8px);

	.commandList {
		padding: 4px;

		.commandItem {
			display: flex;
			align-items: center;
			width: 100%;
			padding: 8px;
			border: none;
			background: none;
			border-radius: 6px;
			cursor: pointer;
			transition: all 0.2s ease;
			color: var(--text);
			font-size: 14px;
			text-align: left;

			&:hover,
			&.selected {
				background: var(--main-20);
			}

			.commandIcon {
				display: flex;
				align-items: center;
				justify-content: center;
				width: 24px;
				height: 24px;
				margin-right: 12px;
				color: var(--text-70);

				svg {
					width: 16px;
					height: 16px;
				}
			}

			.commandLabel {
				display: flex;
				align-items: center;
				justify-content: space-between;
				flex: 1;

				.shortcut {
					font-size: 12px;
					color: var(--text-50);
					margin-left: 12px;
				}
			}
		}
	}
}
